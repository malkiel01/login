# PDF Editor - ××¢×¨×›×ª ×¢×™×‘×•×“ PDF ××ª×§×“××ª ğŸ“„

××¢×¨×›×ª ××§×¦×•×¢×™×ª ×œ×”×•×¡×¤×ª ×˜×§×¡×˜×™× ×•×ª××•× ×•×ª ×¢×œ ×§×‘×¦×™ PDF, ×¢× ×ª××™×›×” ×‘×ª×‘× ×™×•×ª, ×©×›×‘×•×ª ×•×¢×¨×™×›×” ×—×–×•×ª×™×ª.

## âœ¨ ×ª×›×•× ×•×ª

- ğŸ“„ **×¢×™×‘×•×“ PDF** - ×”×•×¡×¤×ª ×˜×§×¡×˜×™× ×•×ª××•× ×•×ª ×¢×œ ×›×œ ×“×£
- ğŸ¨ **×¢×¨×™×›×” ×—×–×•×ª×™×ª** - ×’×¨×™×¨×” ×•×”×–×–×” ×©×œ ××œ×× ×˜×™× ×‘×–××Ÿ ×××ª
- ğŸ“ **×¤×•× ×˜×™× ×¢×‘×¨×™×™×** - ×“×™×•×™×“, ×¨×•×‘×™×§, ×¤×¨× ×§× ×ª×Ÿ ×‘×™×ª ××œ×£ ×•×¢×•×“
- ğŸ–¼ï¸ **×ª××•× ×•×ª** - ×”×¢×œ××”, ×©×™× ×•×™ ×’×•×“×œ, ××™×§×•× ×—×•×¤×©×™
- ğŸ’¾ **×ª×‘× ×™×•×ª** - ×©××™×¨×” ×•×˜×¢×™× ×” ×©×œ ×ª×‘× ×™×•×ª ××•×›× ×•×ª
- ğŸ”„ **× ×™×”×•×œ ×©×›×‘×•×ª** - ×‘×—×™×¨×”, ××™×§×•× ×•×”×¡×ª×¨×” ×©×œ ×©×›×‘×•×ª
- ğŸ” **Zoom** - ×”×’×“×œ×” ×•×”×§×˜× ×” ×©×œ ×ª×¦×•×’×ª ×”-PDF
- ğŸ“± **Responsive** - ×¢×•×‘×“ ×¢×œ ××¡×›×™× ×©×•× ×™×
- âš¡ **Real-time Preview** - ×¨×™× ×“×•×¨ ××™×™×“×™ ×©×œ ×©×™× ×•×™×™×
- ğŸ¯ **Drag & Drop** - ×’×¨×™×¨×ª ×§×‘×¦×™× ×•×’×¨×™×¨×ª ××œ×× ×˜×™×

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ××•×“×•×œ×¨×™×ª

×”×¤×¨×•×™×§×˜ ×¢×‘×¨ ×¨×¤×§×˜×•×¨×™× ×’ ××§×™×£ ×‘-5 ×©×œ×‘×™× ×•×”×•× ×××•×¨×’×Ÿ ×‘×¦×•×¨×” ××§×¦×•×¢×™×ª:

```
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.php                 # ×”×’×“×¨×•×ª ××¢×¨×›×ª ××¨×›×–×™×•×ª
â”œâ”€â”€ docs/                          # ×ª×™×¢×•×“ ××¤×•×¨×˜
â”‚   â”œâ”€â”€ API.md                     # ×ª×™×¢×•×“ API ××œ×
â”‚   â”œâ”€â”€ ARCHITECTURE.md            # ×ª×™××•×¨ ××¨×›×™×˜×§×˜×•×¨×”
â”‚   â”œâ”€â”€ COMPONENTS.md              # ×ª×™×¢×•×“ ×§×•××¤×•× × ×˜×•×ª
â”‚   â””â”€â”€ REFACTORING_PLAN.md        # ×ª×•×›× ×™×ª ×”×¨×¤×§×˜×•×¨×™× ×’
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ css/                       # CSS ××•×“×•×œ×¨×™
â”‚   â”‚   â”œâ”€â”€ base/                  # Reset, Variables, Typography
â”‚   â”‚   â”œâ”€â”€ layout/                # Main layout structures
â”‚   â”‚   â”œâ”€â”€ components/            # UI components
â”‚   â”‚   â””â”€â”€ main.css               # Entry point
â”‚   â”œâ”€â”€ js/                        # JavaScript ES6 Modules
â”‚   â”‚   â”œâ”€â”€ core/                  # Core functionality (ready)
â”‚   â”‚   â”œâ”€â”€ modules/               # Feature modules (ready)
â”‚   â”‚   â”œâ”€â”€ utils/                 # Utilities (ready)
â”‚   â”‚   â”œâ”€â”€ legacy.js              # Original code (1763 lines)
â”‚   â”‚   â””â”€â”€ main.js                # Module entry point
â”‚   â””â”€â”€ php/                       # Backend Services
â”‚       â”œâ”€â”€ core/
â”‚       â”‚   â””â”€â”€ Response.php       # JSON response standardization
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â”œâ”€â”€ ValidationService.php  # Input validation
â”‚       â”‚   â”œâ”€â”€ FileService.php        # File management
â”‚       â”‚   â””â”€â”€ PDFService.php         # PDF processing
â”‚       â””â”€â”€ bootstrap.php          # PSR-4 autoloader + init
â”œâ”€â”€ python/
â”‚   â””â”€â”€ add_text_to_pdf.py        # Python PDF processor
â”œâ”€â”€ uploads/                       # Uploaded PDFs (auto-cleanup)
â”œâ”€â”€ outputs/                       # Processed PDFs (auto-cleanup)
â”œâ”€â”€ templates/                     # Saved templates
â”œâ”€â”€ logs/                          # Error logs
â”œâ”€â”€ index.html                     # Main interface
â””â”€â”€ process.php                    # API endpoint (with fallback)
```

## ğŸš€ ×”×ª×§× ×”

### ×“×¨×™×©×•×ª ××§×“×™××•×ª

- **PHP** 7.4+
- **Python** 3.8+
- **Web Server** (Apache/Nginx)
- **Python Packages**: `pypdf`, `reportlab`

### ×¦×¢×“×™ ×”×ª×§× ×”

1. **Clone ××• Download ×”×¤×¨×•×™×§×˜**
```bash
git clone [repository-url]
cd dashboard/dashboards/cemeteries/files/
```

2. **×”×ª×§× ×ª ×—×‘×™×œ×•×ª Python**
```bash
pip install pypdf reportlab
# ××•
pip install --break-system-packages pypdf reportlab
```

3. **×”×’×“×¨×ª ×”×¨×©××•×ª**
```bash
chmod 755 uploads/ outputs/ templates/ logs/
chmod +x python/add_text_to_pdf.py
```

4. **×¢×“×›×•×Ÿ ×”×’×“×¨×•×ª (××•×¤×¦×™×•× ×œ×™)**
×¢×¨×•×š ××ª `config/config.php` ×•×”×ª×× × ×ª×™×‘×™× ×œ-Python virtual environment ×× × ×“×¨×©.

### ×”×¨×¦×” ××§×•××™×ª

```bash
php -S localhost:8000
```

×’×© ×œ-`http://localhost:8000`

## ğŸ“– ×ª×™×¢×•×“ ××¤×•×¨×˜

- **[API.md](docs/API.md)** - ×ª×™×¢×•×“ ××œ× ×©×œ ×›×œ ×”-endpoints
- **[ARCHITECTURE.md](docs/ARCHITECTURE.md)** - ×ª×¨×©×™××™× ×•×ª×™××•×¨ ××¨×›×™×˜×§×˜×•×¨×”
- **[COMPONENTS.md](docs/COMPONENTS.md)** - ×ª×™×¢×•×“ Frontend + Backend components
- **[REFACTORING_PLAN.md](docs/REFACTORING_PLAN.md)** - ×ª×•×›× ×™×ª ×¨×¤×§×˜×•×¨×™× ×’ ×©×œ 5 ×©×œ×‘×™×

## ğŸ”§ ×˜×›× ×•×œ×•×’×™×•×ª

### Frontend
- **HTML5** - Semantic markup
- **CSS3** - Modular CSS with Variables
- **JavaScript ES6** - Modules + Modern syntax
- **PDF.js** - Client-side PDF rendering

### Backend
- **PHP 7.4+** - Service layer architecture
- **PSR-4 Autoloading** - Namespace-based class loading
- **Service Pattern** - ValidationService, FileService, PDFService

### Python
- **pypdf** - PDF manipulation
- **reportlab** - PDF content generation

## ğŸ¯ Refactoring Phases (Completed)

×”×¤×¨×•×™×§×˜ ×¢×‘×¨ 5 ×©×œ×‘×™ ×¨×¤×§×˜×•×¨×™× ×’ ××§×™×¤×™×:

- âœ… **Phase 1**: Infrastructure - config, docs, structure
- âœ… **Phase 2**: Backend - PHP services architecture
  - âœ… **Phase 2.1**: Exception handler conflict fix
  - âœ… **Phase 2.2**: Autoloader case-sensitivity fix
- âœ… **Phase 3**: CSS - Modular structure with variables
- âœ… **Phase 4**: JavaScript - ES6 modules preparation
- âœ… **Phase 5**: Documentation & final touches

## ğŸ” ××‘×˜×—×”

- âœ… Input validation ×¢×œ ×›×œ ×”×§×œ×˜×™×
- âœ… File type validation (MIME + extension)
- âœ… Path sanitization
- âœ… Automatic file cleanup (1 hour TTL)
- âœ… Error logging without sensitive data exposure
- âœ… Prepared statements (ready for DB)

## ğŸ› Debugging

×œ×”×¤×¢×œ×ª debug mode, ×¢×¨×•×š `config/config.php`:

```php
const DEBUG_MODE = true;
const LOG_ERRORS = true;
```

×œ×•×’×™× × ×©××¨×™× ×‘-`logs/error.log`

## ğŸ“š ×›×™×¦×“ ×œ×”×©×ª××©

1. ×¤×ª×— ××ª `index.html`
2. ×”×¢×œ×” ×§×•×‘×¥ PDF (drag & drop ××• ×‘×—×™×¨×”)
3. ×”×•×¡×£ ×˜×§×¡×˜×™× ×•×ª××•× ×•×ª
4. ×’×¨×•×¨ ×•×©× ×” ××™×§×•×/×’×•×“×œ
5. ×©××•×¨ ×›×ª×‘× ×™×ª (××•×¤×¦×™×•× ×œ×™)
6. ×œ×—×¥ "×¢×‘×“ ×§×•×‘×¥"
7. ×”×•×¨×“ PDF ××¢×•×‘×“

## ğŸš§ ×¢×‘×•×“×” ×¢×ª×™×“×™×ª (Phase 4.1+, 3.1+)

### JavaScript Modules
- ×—×™×œ×•×¥ modules ×-legacy.js:
  - `core/config.js` - ×§×‘×•×¢×™× ×•××©×ª× ×™×
  - `core/state.js` - State management
  - `modules/pdf-viewer.js` - PDF rendering
  - `modules/text-editor.js` - Text editing
  - `modules/image-handler.js` - Image handling
  - `utils/drag-drop.js` - Drag utilities
  - `utils/fonts.js` - Font loading

### CSS Components
- ×—×™×œ×•×¥ components ×-legacy.css:
  - `components/upload-area.css`
  - `components/buttons.css`
  - `components/pdf-viewer.css`
  - `components/toolbar.css`
  - `components/modals.css`

## ğŸ™ ×ª×•×“×•×ª

- **Claude Code** - Refactoring & Architecture
- **Original Developer** - Initial implementation
- **Community** - Testing & Feedback

## ğŸ“ License

[×¦×™×™×Ÿ ×¨×™×©×™×•×Ÿ ×œ×¤×™ ×”×¦×•×¨×š]

---

**× ×‘× ×” ×¢× â¤ï¸ ×•-×§×•×“ × ×§×™**

_Refactored: December 2024_
